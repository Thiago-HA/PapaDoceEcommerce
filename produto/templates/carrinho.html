{% extends 'base_autenticado.html' %}
{% load static %}



{% block titulo %} 
    Meu Carrinho
{% endblock titulo %}


{% block 'conteudo' %}
    <div class="container-produtos-carrinho">
    {% if status == '1' %}
            <div class="produto-coontainer col-md">
                <div class="card" style="width: 50rem;">
                    <h1>Ops! Seu Carrinho está vazio :&#40;</h1>
                    <a href="{% url 'home' %}" class="btn btn-info">CONTINUAR COMPRANDO</a>
                    <br>
                </div>
            </div>
        {% else %}
        
        <div class="selecao-endereco col-md">
        {% for endereco in endereco %}

            <div class="produto-coontainer col-md">
                <div class="card" style="width: 18rem;">
                    <div class="card-body card-info">
                    <h5 class="card-title ">Cidade: {{endereco.endereco.cidade}}</h5>
                    <h5 class="card-subtitle ">Rua: {{endereco.endereco.rua}}</h5>
                    </div>
                    <a href="" class="btn btn-info">Ver detalhes</a>
                    <br>
                    <input type = "checkbox" id = "subscribeNews" name = "subscribe" value = "newsletter">
                    <br>
                </div>
            </div>
        
        {% endfor %}

        <a href="" class="btn btn-info">Novo endereço</a>
        </div>

        {% for carrinho in carrinho %}
                
                <div class="produto-coontainer col-md">
                    <div class="card" style="width: 18rem;">
                        <img src="{{carrinho.produto.imagem.url}}" class="card-img-top" alt="...">
                        <div class="card-body card-info">
                        <h5 class="card-title ">{{carrinho.produto.titulo}}</h5>
                        <h1 class="card-subtitle ">R$: {{carrinho.produto.preco}}</h1>
                        </div>
                        <a href="{% url 'ver_produto' carrinho.produto.id %}" class="btn btn-info">Ver detalhes</a>
                        <br>
                        <a href="{% url 'carrinho_remove' carrinho.id %}" class="btn btn-danger">Remover</a>
                        <br>
                    </div>
                </div>
        
        {% endfor %}
    </div>
        Total: {{total}}
        
        <div class="cho-container">
        </div>
          
          <script>
            const mp = new MercadoPago('TEST-99afa9d8-7aa3-443b-90bc-c71e932c4898', {
              locale: 'pt-BR'
            });
          
            mp.checkout({
              preference: {
                  id: '{{preference}}'
              },
              render: {
                  container: '.cho-container',
                  label: 'Finalizar Pedido',
              }
            });
          </script>

    {% endif %}



{% endblock %}
